- updates_count = task.updates.count
- likes_count = task.likes_count
- assignee = task.assignee
- task_task_date = task.task_date
- task_information = task.information

.task-card
  %h1.show-card-title=task.title  
  -if updates_count > 0
    .comments-count
      =updates_count
    %i.fa.fa-comment.task-card-icon  
  -if likes_count > 0
    .hearts-count
      =likes_count
    %i.fa.fa-heart.task-card-icon.heart-icon-color
  %h3.show-card-section-header
    Covered By
  -if assignee
    =image_tag(assignee.picture_url(:sq_thumb))
  -else
    %p I can help.
  %h3.show-card-section-header
    Date and Time
  -if task_task_date
    %p
      =task_task_date.strftime('%l:%M %p') + ' on '
      =task_task_date.strftime('%A, %B %e')
    .time-from-now
      -diff = task_task_date.to_i - Time.now.to_i
      ="in #{distance_of_time_in_words(diff)}"
  -else
    %p No date or time information.
  %h3.show-card-section-header
    Details
  -if task_information
    %p=task_information
  -else
    %p No additional details.
  %h3.show-card-section-header
    Actions
  -if current_user.admin?
    =link_to edit_group_task_path(group, task) do
      %span.awesome
        %span.glyphicon.glyphicon-edit
    =link_to group_task_path(group, task), method: :delete, data: { confirm: 'Are you sure you want to delete this task?' } do
      %span.awesome
        %span.glyphicon.glyphicon-trash
  -if current_user == assignee
    =link_to "DROP", group_task_path(group, task, params: {assignee_id: nil}), method: :put, data: { confirm: 'Are you sure you want to drop this task?'}
